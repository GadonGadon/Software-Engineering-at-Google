# Chapter 10. Documentation
> Documentation : 엔지니어가 작업을 끝마치기 위해 작성해야 하는 모든 부수적인 텍스트
## 문서 작업이 중요한 이유
대부분의 엔지니어가 코드를 작성하고, 이용하고, 유지보수 하며 토론하는 불만은 **"양질의 문서 자료의 부족"** 이다. 
- 이 메서드에는 어떠한 부수효과가 있는가?
- 3번째 단계에서 에러가 날때 해결 방법은 무엇인가?
- 이 약어는 무엇을 줄여놓은 것인가?
- 이 문서는 최신의 정보를 반영했나?
- 이 설계를 택한 이유가 뭐지?
- 코드를 왜 이렇게 구현했지?

이러한 질문에 쉽게 답을 얻을 수 있는 방법은 **문서 자료** 이지만 문서 자료의 양이 부족하거나 부정확 할 경우 직접 하나하나  찾아 내야 한다. 즉, 문서 작업은 코드를 이용하는 모든 방법에서 가장 중요한 작업 중 하나이다.
### 문서 작업을 할 때의 장점
> 양질의 문서 자료 : 엔지니어링 조직에 커다란 축복
- 코드와 API가 이해하기 더 쉬워지고 실수가 줄어든다.
	- 수동적으로 해야 하는 일은 절차가 잘 기술되어 있어야 쉬워지고 실수 없이 빠르게 마칠 수 있다.
	- 새로운 인력을 팀에 안착시키는 데 드는 노력 역시 훨씬 쉬워진다.
- 초기 투자 비용에 비해 얻을 수 있는 혜택이 시간에 비례해 커진다.
	- 양질의 문서는 처음에 한번 제대로 작성하면 수 백번, 수 천번 읽히며 많은 사람에게 도움이 된다.
- API를 가다듬는데 도움을 준다.
	- API 문서화는 API가 가치가 있는지를 알아내는 가장 확실한 방법이다. 문서로 API를 말끔하게 설명할 수 없다면, 설계가 미흡한 것이다.
- 유지보수를 위한 로드맵과 과거 이력을 제공한다.
	- 코딩에서 꼼수는 옳지 못한 방법이다. 하지만 피치못할 경우 주석으로 이를 잘 설명해야 후에 문제점을 찾는데 도움이 된다.
- 코드가 더 전문적이고 매력 있어 보이게 된다.
- 이용자의 질문이 줄어든다.

### 문서 작업을 덜 중요하게 생각하는 이유
- 혜택이 즉각적으로 돌아오지 않는다.
	- 문서를 작성하는 일은 선제적인 작업이지만, 혜택은 후에 돌아오기 때문에 즉각적인 보상을 받을 수 없다.
- 많은 엔지니어가 문서화(글쓰기)는 프로그래밍과 별개의 기술로 생각한다.
- 많은 엔지니어가 글쓰기에 자신 없어한다.
- 문서 자료가 개발 워크플로 통합 측면에서 아직 많이 부족해서 상대적으로 작성하기가 어렵다.
- 문서 자료를 추가함으로써 유지보수할 대상이 하나가 늘어난다고 생각한다.


## 어떻게 문서 작업을 잘 할 수 있을까?
 테크니컬 라이터 또는 프로젝트 매니저가 이에 도움을 줄 수 있지만 대부분의 작업은 소프트웨어 엔지니어 본인이 직접 작성해야한다. 따라서 문서 자료를 효과적으로 할 수 있도록 소프트웨어 엔지니어에게 적절한 도구와 보상이 필요하다.
 ### 문서자료 = 코드
 C++, Python, Java 등과 같이 문서자료 역시 하나의 언어이다. 프로그래밍 언어와 같이 규칙이 있고, 구문 규정이 있고, 스타일이 있다. 또한, 코드와 마찬가지로 일관되어야 하고, 명확해야 하고, 이해를 방해하는 오류를 피해야 한다. 구글 역시, 이를 위해 코드 주석 까지 프로그래밍 언어별 표준 스타일을 정해두었다. 
 문서 자료는 결국 소스코드와 매우 밀접환 관계가 있을 확률이 높으므로 가능한 한 코드처럼 다뤄야 하며 아래 규칙을 따라야 한다.
 - 꼭 따라야 하는 내부 정책과 규칙이 있어야 한다.
 - 버전 관리 시스템에 등록해 관리해야 한다.
 - 관리 책임자를 명시해야 한다.
 - 변경 시 코드와 함께 리뷰를 거쳐야 한다.
 - 코드상의 버그를 추적하는 문제를 추적해야 한다.
 - 주기적으로 평가를 받아야 한다.
 - 가능하다면 정확성이나 최신 정보 반영 여부 등을 측정해야 한다.

 ### 독자를 알자.
 엔지니어들이 문서 자료를 작성하며 범하는 가장 중요한 실수 : **자신만을 위해 작성한다.**
문서를 작성하기 전에는 독자가 누구인지를 공식적으로든, 비공식적으로든 확인하여야 한다.
독자를 명확하게 확인할 수 있으면 독자들에게 각각 맞춰서 문서를 작성하는 것이 효과적이다.
**기술 수준에서의 독자 유형**
- 경험 수준 : 전문 프로그래머, 혹은 프로그래밍 언어조차 낯선 초보 엔지니어
- 도메인 지식 : 팀원, 혹은 최종 API정도만 친숙한 사내의 다른 엔지니어
- 목적: API를 사용하여 정보를 급히 알아내야 하는 최종 사용자, 혹은 아무에게도 유지보수를 맡고 싶어하지 않는 코드를 기꺼이 헌신적으로 책임지려하는 전문가.

 **접하게 되는 방식에 따라서의 독자 유형**
- seeker : 자신이 원하는 것을 명확하게 알고, 해당 문서 자료가 원하는 정보를 담고 있는가?	- 원하는 정보를 담고 있는지, 명확한지를 알려주어야 하므로 일관성이 핵심이다.	- 여러 종류의 문서자료가 비슷한 포맷을 가지고 있어야한다.
- stumbler : 무엇을 원하는지 정확하게 알지 못한다. 즉, 어떻게 구현할지에 대해 어슴푸레하게 아이디어만 가지고 있다.	- 글을 명료하게 작성한다. (TL;DR)


독자가 명확한 경우, 독자들에 맞춰서 작성하면 된다. 하지만 독자가 명확하지 않은 공개적인 경우,  독자의 스펙트럼이 큰 만큼 모든 독자들이 읽어도 이해할 수 있을만한 문서로 작성하여야 한다. 
- 지식이 풍부한 전문가에게 맞춰 세세한 이야기를 할 경우 : 초보자는 혼란스러워 한다.
- 초보자 눈낲이에 맞춰 모든것을 하나하나 자세히 이야기 할 경우 : 전문가는 지루해 한다.
> 문서 작성의 핵심 : 균형을 잘 잡는것. 문서를 짧고 명확하게 작성하는것

## 문서 자료 유형
> 하나의 API가 두 가지 일을 하면 안 되듯 하나의 문서에서 여러 가지 일을 하려 해서는 안되고, 더 논리적인 조각으로 나눠야 한다.
- 소프트웨어 엔지니어가 자주 작성하게 되는 주요 문서 종류
	- 참조용 문서자료(코드 주석 포함)
	- 설계 문서
	- 튜토리얼
	- 개념 설명 문서자료
	- 랜딩 페이지

1. 참조용 문서자료
	- 엔지니어가 작성할 문서 중 가장 흔한 형태
	- 코드베이스에 속한 코드의 사용법을 설명하는 문서 모두를 일컫는다.
	- 코드베이스의 주석을 기초로 한다.
		- PyDoc, GoDoc, Javadoc 등의 주석 프레임워크를 활용하거나 C++의 헤더파일에 API설명을 자세하게 작성한다.
	- **파일 주석**
		- 파일 주석은 **모든**파일의 상단에 위치하며 각각 해당 코드의 주요 쓰임새와 어떤 독자를 의도하고 만든 코드인지를 **간략**하게 명시한다.
		```c++
		// ----------------------------------------------------------------------------- 
		// str_cat.h 
		// ----------------------------------------------------------------------------- 
		// 
		// This header file contains functions for efficiently concatenating and appending 
		// strings: StrCat() and StrAppend(). Most of the work within these routines is 
		// actually handled through use of a special AlphaNum type, which was designed 
		// to be used as a parameter type that efficiently manages conversion to 
		// strings and avoids copies in the above operations.
		```
		- 하나의 API가 파일 주석으로 간략하게 설명이 안될 경우 사려 깊게 설계되지 않은 API이므로 여러 조각으로 쪼개는 방안을 고려한다.
	- **클래스 주석**
		-  현대의 언어들의 대부분은 객체 지향이므로, 클래스 주석은 API객체를 정의하는 중요한 주석이다. 
		- 파일 주석과 마찬가지로 **모든**클래스에 클래스 주석이 작성되어야 한다.
		- 클래스 주석은 보통 **객체**임을 부각하기 위해 클래스 자신을 문장의 주어로 두고 어떻게 동작하는지를 설명한다. 예를들어 "foo 클래스는 x, y, z속성을 가지며, A라는 기능을 제공한다." 와 같이 작성한다.
		```c++
		// ----------------------------------------------------------------------------- 
		// AlphaNum 
		// ----------------------------------------------------------------------------- 
		// 
		// The AlphaNum class acts as the main parameter type for StrCat() and 
		// StrAppend(), providing efficient conversion of numeric, boolean, and 
		// hexadecimal values (through the Hex type) into strings.
		```
	- **함수 주석**
		- public 함수에서는 **반드시** 함수가 무슨 역할을 하는지 작성하여야 한다.
		- 함수 주석은 함수가 무슨 동작을 하고 무엇을 반환하는지 설명하며, **능동성**을 부각하기 위해 동사로 시작해야 한다.
		- 모든 함수 주석이 동사로 시작하면 일관성이 생기게 되며 원하는 기능을 동사만을 통해 빠르게 파악이 가능한다.
		```c++
		// StrCat() 
		// 
		// Merges the given strings or numbers, using no delimiter(s), 
		// returning the merged result as a string.
		```
2. 설계 문서
- 설계 문서는 중요한 프로젝트에 착수하기 전 승인 받는 중요한 문서이다.
- 대부분의 엔지니어링 팀은 공유된 특정 템플릿을 이용하며, 협업 도구를 통해 같이 공유하며 작성한다.
- 설계 문서 작성은 새 시스템을 배포하기 전에 첫 번째로 수행되어야 할 일이며, 보안, 국제화, 스토리지 요구사항, 개인정보 보호 등 다양한 측면을 고려해보는지 확인하는 작업이 되기도 한다.
- 대부분의 경우 각 도메인의 전문가들이 검토해주며, 명확한 목적을 가지도록 한다.
- 좋은 설계 문서
	- 설계의 목표와 구현 전략을 잘 설명한다.
	- 설계상의 핵심 선택들과 관련한 트레이드 오프를 명시한다.
- 설계 문서는 작성이 완료된 후 아무렇게나 보관하면 안되며, 언제든 다시 꺼내볼 수 있도록 하여야 한다. 또한 릴리즈전에 설계의 목표와 일치하는지 확인해 보아야 한다.
3. 튜토리얼
![Hello, “Hello, World”](https://d1y8sb8igg2f8e.cloudfront.net/images/shutterstock_1375463840.2e16d0ba.fill-1200x630.jpg)
	> Hello World! : 모든 팀원들이 첫 발을 내딛는데 가장 좋은 방법(튜토리얼)
	- 어떠한 프로젝트든 아무런 사전지식 없는 엔지니어가 **실제로** 무언가를 동작시켜볼 수 있는 "Hello World!"문서가 반드시 필요하다.
	- 튜토리얼을 작성하기 가장 좋은시점 : 누군가 팀에 새로 합류했을 때
	- 독자가 순서에 맞춰 실행할 수 있도록 **독자가 행동해야 할 모든**단계에 번호를 명확하게 붙여야 한다. 
	- **나쁜 튜토리얼**
		1. Download the package from our server at http://example.com 
		2. Copy the shell script to your home directory 
		3.  Execute the shell script
		4.  The foobar system will communicate with the authentication system
		5.  Once authenticated, foobar will bootstrap a new database named “baz”
		6. Test “baz” by executing a SQL command on the command line 
		7. Type: CREATE DATABASE my_foobar_db;
		- 중간에 	독자가 행동할 필요 없는 서버에서 이루어지는 일(4, 5)이 작성되기 때문에 설명으로 작성하지 않는것이 좋다.
		- 6, 7단계가 서로 겹치는 내용이기 때문에 단계의 구분이 불명확하다.

	- **개선된 튜토리얼**
		- 독자가 한 번에 수행하는 작업은 하나의 단계에서 설명하여 각 단계별 헷갈리지 않도록 한다.
		- 독자가 눈으로 확인할 수 있는 입력이나 출력이 있다면 별도로 명시해주는게 좋다.
		a. Download the package from our server at http://example.com: 
		```bash
		$ curl -I http://example.com 
		```
		b. Copy the shell script to your home directory: 
		```bash
		$ cp foobar.sh ~ 
		```
		c. Execute the shell script in your home directory: 
		```bash
		$ cd ~; foobar.sh
		```
		
			The foobar system will first communicate with the authentication system. 
			Once authenticated, foobar will bootstrap a new database named “baz” and open an input shell.
		d. Test “baz” by executing a SQL command on the command line: baz:
		```bash
		$ CREATE DATABASE my_foobar_db;
		```
	
4. 개념 설명 문서자료
	[ROS Wiki](http://wiki.ros.org/Documentation), [OpenCV Doc](https://docs.opencv.org/4.x/)
	- 코드 주석같은 참조용 문서 자료만으로는 부족하여 깊이 있는 설명을 곁들여야 할 때 필요한 문서
	- 참조 문서의 대체하기보다는 보강하는 역할
		- 정보가 중복되어 보이기도 하지만 더 명확하게 설명하기 위해 의도적으로 중복되게 작성
	- 모든 상황에 대해 설명할 필요는 없다.
5. 랜딩 페이지(문서 페이지의 첫 화면)
 - 고객이 알아야할 자료와 팀 내부에서 알야할 내용은 **아주 많이** 다르므로 별개의 페이지로 작성한다.

## 문서자료 리뷰 
> 대부분의 코드가 리뷰를 받는것과 마찬가지로 문서 자료 역시 리뷰를 거쳐야한다.
- 기술 문서 리뷰에 효과적인 방식
	- **정확성** 확인용 기술 리뷰 : 해당 주제 전문가가 수행하며, 팀 동료인 경우가 많다. 코드 리뷰 과정에서 문서 자료를 함께 다룬다.
	- **명확성** 확인용 독자 리뷰 : 주로 도메인을 잘 모르는 사람이 수행한다. 팀에 새로 합류한 동료 또는 해당 API의 고객이 주로 해당한다.
	- **일관성** 확인용 작문 리뷰 : 테크니컬 라이터나 자원자가 수행한다.
 
 ## 문서화 철학
 ### WHO, WHAT, WHEN, WHERE, and WHY
- 대부분의 문서 자료 : HOW에 대한 답변
	- 나머지 5가지 질문들이 대체적으로 HOW만큼 중요하지 않은것은 사실이지만, 위의 것을 제대로 구성하지 않으면 혼란스러운 문서가 된다.
- 어떠한 문서든 처음 두 문단이 끝나기 전에 다음 질문들에 답하도록 시도해보는것이 좋다.
	- WHO : 대상 독자가 누구인지를 문서 안에서 명확하게 밝힐 수 있다면 작성하는것이 좋다.
		- "Secret Wizard 프로젝트에 참여하는 신규 엔지니어를 위한 문서입니다."
	- WHAT : 문서의 목적을 알려준다.
		- "이 문서는 Frobber 서버를 테스트 환경에서 구동하기 위해 설계된 튜토리얼 입니다."
		- WHAT과 연관되지 않는 정보가 적혀 있다면 해당 내용은 별도의 문서로 다시 만들어야 한다는 뜻이다.
	- WHEN : 문서가 생성되고, 리뷰되고, 갱신된 날짜를 작성한다.
	- WHERE : 문서가 존재해야 할 장소를 말해준다.
	- WHY : 문서를 읽은 독자가 무엇을 얻어가기를 바라는지 작성한다. 대체적으로 문서의 소개 부분에 명시하는게 좋다.
### The Beginning, Middle, and End
- 문서에 절을 추가하는 것을 두려워 하면 안된다. 
	- 절들은 내용 흐름을 논리적 조각으로 나눠주고 독자에게 문서가 다루는 내용의 로드맵을 제시한다.
- 문서의 처음 : 문제를 보여준다.
- 문서의 중간 : 추천하는 해법을 설명한다.
- 문서의 끝 : 핵심을 요약한다.

### The Parameters of Good Documentation
- 일반적인 좋은 문서자료의 세 가지 특징 : 완전성, 정확성, 명확성
- 세 가지 특징을 모두 챙기는 것은 쉽지 않다.
	- 문서를 '완벽하게' 만들게 되면 명확성이 떨어지기 쉬우며, 문서를 명확하게 설명하다보면 정확성이 떨어지게 된다.
- 결국, 좋은 문서란 의도한 역할을 잘 수행하는 문서이다.
	- 각각의 문서는 무엇에 집중할지를 정하고 그에 맞게 작성되어야 한다.
		- 개념 문서 : API의 모든 측면을 전부 다룰 필요 없다.
		- 참조 문서 : 완전하게 작성하되 명확성은 떨어져도 된다.
		- 랜딩 페이지 : 구성에 집중하면 된다.

### Deprecating Documents
- 오래된 코드와 마찬가지로 오래된 문서도 문제를 일으키게 된다.
	- 문서가 버려지는 일이 없도록 계속해서 유지 보수 해야한다.
- 유지 보수를 하여도 본래의 목적을 더 이상 수행할 수 없다면 폐기하거나 "폐기 대상"으로 표시하여 최신 정보의 위치를 알려주어야 한다.
	- 본인 소유의 문서가 아니더라도 "이 문서는 더 이상 유효하지 않다"와 같은 표시를 남겨야한다.
- 구글에서의 방식 : **freshness date**
	- 문서에 마지막으로 리뷰한 날짜를 기록해 두고 일정 기간 갱신되지 않을경우 알림 메일을 보내는 방식

	```xml
	<!--*
	# Document freshness: For more information, see go/fresh-source.
	freshness: {owner: 'username' reviewed: '2019-02-27'}
	*-->
	```
